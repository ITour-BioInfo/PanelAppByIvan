From 505e3c7a150c80589b7bbfe981801fa5be022be1 Mon Sep 17 00:00:00 2001
From: AI <ai@example.com>
Date: Mon, 22 Dec 2025 14:46:55 +0000
Subject: [PATCH 1/5] Add panels directory with README, index, and sample
 panels

---
 panels/README.md             | 37 ++++++++++++++++++++++++++++++++++++
 panels/cardiomyopathy.txt    | 10 ++++++++++
 panels/epilepsy.txt          | 10 ++++++++++
 panels/hereditary_cancer.txt | 10 ++++++++++
 panels/index.yml             | 17 +++++++++++++++++
 5 files changed, 84 insertions(+)
 create mode 100644 panels/README.md
 create mode 100644 panels/cardiomyopathy.txt
 create mode 100644 panels/epilepsy.txt
 create mode 100644 panels/hereditary_cancer.txt
 create mode 100644 panels/index.yml

diff --git a/panels/README.md b/panels/README.md
new file mode 100644
index 0000000..6fbefe1
--- /dev/null
+++ b/panels/README.md
@@ -0,0 +1,37 @@
+# Gene Panels Directory
+
+This directory contains gene panels for the **PanelAppByIvan** project.  Each panel is stored as a plain text file (`.txt`) containing one gene symbol per line.  The goal is to keep the format extremely simple so that it can be edited by anyone using a basic text editor, spreadsheet software or through the optional panel editor web application.
+
+## Panel file format
+
+* Each non‑empty, non‑comment line **must** contain exactly one gene symbol with no spaces or tabs.  Gene symbols are case sensitive and should follow HGNC conventions.
+* Lines starting with `#` are treated as comments and are ignored by tooling.  Comment lines may be used for notes or section headers within a panel.
+* Blank lines are ignored and may be used to group genes visually.  However, try to avoid excessive spacing as this can introduce confusion.
+* Files **must** end with a single newline character.  Many text editors add this automatically, but please double‑check to avoid validation failures.
+* Genes should be listed in alphabetical order (case‑insensitive) to make diffs easy to read.  The validation script will flag any out‑of‑order entries.
+* Duplicate gene symbols are not allowed.  The validator will fail on exact duplicates and warn about case‑insensitive duplicates (e.g. `abc` vs `ABC`).
+
+### Editing in Excel or other spreadsheet software
+
+To edit a panel using a spreadsheet application such as Excel or LibreOffice:
+
+1. Open the `.txt` file as a single‑column spreadsheet.  Most editors will detect that it is a plain text file and offer to split by lines.
+2. Edit the gene list in the single column.  Avoid adding extra whitespace or multiple words per cell.
+3. When saving, choose **Text (Tab delimited)** or **CSV** and ensure that there is exactly one gene symbol per line.  Do not include a header row.
+4. Re‑open the saved file in a text editor to confirm that the format matches the rules above (no extra commas or quotes).
+
+## Index and metadata
+
+A simple catalog of available panels is kept in `index.yml`.  Each entry includes an identifier, a human readable title, the filename of the panel, and an optional list of owners (GitHub usernames or teams) responsible for reviewing changes.  Feel free to add additional metadata fields if they become useful in the future.
+
+## Validation
+
+A Python script (`scripts/validate_panels.py`) is provided to check that all panels conform to the rules above.  It runs automatically in continuous integration (CI) and will fail the build if issues are detected.  You can also run it locally before committing changes:
+
+```bash
+python scripts/validate_panels.py
+```
+
+## Submitting changes
+
+Changes to panels should be made on a feature branch and opened as a pull request.  The PR template in this repository asks for basic information about which panels were modified and why.  Continuous integration will validate the panels and provide a summary of added/removed genes.  Once approved by a code owner, the PR can be merged.
diff --git a/panels/cardiomyopathy.txt b/panels/cardiomyopathy.txt
new file mode 100644
index 0000000..6666883
--- /dev/null
+++ b/panels/cardiomyopathy.txt
@@ -0,0 +1,10 @@
+BAG3
+DSP
+LMNA
+MYBPC3
+MYH7
+PKP2
+SCN5A
+TNNI3
+TNNT2
+TTN
diff --git a/panels/epilepsy.txt b/panels/epilepsy.txt
new file mode 100644
index 0000000..6829f0c
--- /dev/null
+++ b/panels/epilepsy.txt
@@ -0,0 +1,10 @@
+CHD2
+DEPDC5
+KCNQ2
+KCNQ3
+PCDH19
+SCN1A
+SCN2A
+SCN8A
+SLC2A1
+STXBP1
diff --git a/panels/hereditary_cancer.txt b/panels/hereditary_cancer.txt
new file mode 100644
index 0000000..7f1e462
--- /dev/null
+++ b/panels/hereditary_cancer.txt
@@ -0,0 +1,10 @@
+ATM
+BRCA1
+BRCA2
+CHEK2
+MLH1
+MSH2
+MSH6
+PALB2
+PMS2
+TP53
diff --git a/panels/index.yml b/panels/index.yml
new file mode 100644
index 0000000..2c912d8
--- /dev/null
+++ b/panels/index.yml
@@ -0,0 +1,17 @@
+- id: hereditary_cancer
+  title: Hereditary Cancer
+  filename: hereditary_cancer.txt
+  owners:
+    - "@ORG/panel-curators"
+
+- id: cardiomyopathy
+  title: Cardiomyopathy
+  filename: cardiomyopathy.txt
+  owners:
+    - "@ORG/panel-curators"
+
+- id: epilepsy
+  title: Epilepsy
+  filename: epilepsy.txt
+  owners:
+    - "@ORG/panel-curators"
\ No newline at end of file
-- 
2.39.5


From 0e5063565dc460720289da097af6e25b89301ce3 Mon Sep 17 00:00:00 2001
From: AI <ai@example.com>
Date: Mon, 22 Dec 2025 14:46:57 +0000
Subject: [PATCH 2/5] Add validation and diff scripts for panels

---
 scripts/panel_diff.py      | 105 +++++++++++++++++++++++++++++++
 scripts/validate_panels.py | 126 +++++++++++++++++++++++++++++++++++++
 2 files changed, 231 insertions(+)
 create mode 100644 scripts/panel_diff.py
 create mode 100644 scripts/validate_panels.py

diff --git a/scripts/panel_diff.py b/scripts/panel_diff.py
new file mode 100644
index 0000000..f939f44
--- /dev/null
+++ b/scripts/panel_diff.py
@@ -0,0 +1,105 @@
+#!/usr/bin/env python3
+"""
+Generate a markdown summary of gene panel changes between two git refs.
+
+This script compares panel files (`panels/*.txt`) across two commits and
+reports added and removed genes for each changed panel.  The output is
+intended to be used in continuous integration to comment on pull requests.
+
+Usage:
+    python scripts/panel_diff.py <base_ref> <head_ref>
+
+If either argument is omitted the script exits with an error.  The working
+directory must be a git repository with the panels present.  The script has
+no external dependencies beyond the Python standard library and git being
+installed.
+
+Example output:
+
+    ## panels/cardiomyopathy.txt
+    Added: GENE1, GENE2
+    Removed: GENE3
+
+New files list all genes under "Added"; deleted files list all genes under
+"Removed".  If a panel changes only comments or whitespace then no output
+will be generated for that file.
+"""
+
+from __future__ import annotations
+
+import os
+import subprocess
+import sys
+from typing import List, Set, Tuple
+
+
+def read_genes_from_blob(ref: str, path: str) -> Set[str]:
+    """Return a set of gene symbols from a file at the given ref.
+
+    Comment lines (starting with '#') and empty lines are ignored.  Whitespace
+    is stripped.  If the file does not exist at the given ref, an empty set
+    is returned.
+    """
+    try:
+        # Use git show to get file content at given ref
+        output = subprocess.check_output(["git", "show", f"{ref}:{path}"], stderr=subprocess.STDOUT)
+        text = output.decode("utf-8", errors="replace")
+    except subprocess.CalledProcessError:
+        return set()
+    genes: Set[str] = set()
+    for line in text.splitlines():
+        line = line.strip()
+        if not line or line.startswith("#"):
+            continue
+        genes.add(line)
+    return genes
+
+
+def list_changed_panel_files(base: str, head: str) -> List[str]:
+    """List panel files (.txt) that changed between two refs."""
+    try:
+        output = subprocess.check_output([
+            "git", "diff", "--name-only", base, head, "--", "panels"
+        ])
+    except subprocess.CalledProcessError as e:
+        print(f"Error running git diff: {e.output}", file=sys.stderr)
+        sys.exit(1)
+    files = [f for f in output.decode().splitlines() if f.endswith(".txt")]
+    return files
+
+
+def generate_diff(base: str, head: str) -> str:
+    """Generate a markdown summary of gene additions/removals between refs."""
+    lines: List[str] = []
+    changed_files = list_changed_panel_files(base, head)
+    for file in sorted(changed_files):
+        base_genes = read_genes_from_blob(base, file)
+        head_genes = read_genes_from_blob(head, file)
+        added = sorted(head_genes - base_genes)
+        removed = sorted(base_genes - head_genes)
+        # Skip if no content changes (e.g. only comments or whitespace)
+        if not added and not removed:
+            continue
+        lines.append(f"## {file}")
+        if added:
+            lines.append("Added: " + ", ".join(added))
+        if removed:
+            lines.append("Removed: " + ", ".join(removed))
+        lines.append("")  # blank line between files
+    return "\n".join(lines).strip() + "\n" if lines else ""
+
+
+def main() -> None:
+    if len(sys.argv) != 3:
+        print("Usage: python scripts/panel_diff.py <base_ref> <head_ref>", file=sys.stderr)
+        sys.exit(1)
+    base, head = sys.argv[1:3]
+    summary = generate_diff(base, head)
+    if summary:
+        print(summary)
+    else:
+        print("No gene changes detected.")
+
+
+if __name__ == "__main__":
+    main()
\ No newline at end of file
diff --git a/scripts/validate_panels.py b/scripts/validate_panels.py
new file mode 100644
index 0000000..86c89d0
--- /dev/null
+++ b/scripts/validate_panels.py
@@ -0,0 +1,126 @@
+#!/usr/bin/env python3
+"""
+Validation script for gene panel files.
+
+This script scans all `.txt` files in the `panels/` directory, enforcing
+formatting rules to keep diffs deterministic and panels consistent:
+
+* Lines beginning with `#` are ignored as comments.
+* Empty lines are ignored.
+* Each non‑comment line must contain exactly one token (no spaces or tabs).
+* Files must end with a newline character.
+* Genes must be sorted alphabetically (case‑insensitive) to make diffs simple.
+* Duplicate gene entries are not allowed (case‑sensitive) and case‑insensitive
+  duplicates generate warnings.
+
+If any errors are detected the script exits with a non‑zero status and
+prints clear error messages including the filename and line number.
+
+Usage:
+    python scripts/validate_panels.py
+
+This script is intentionally simple and has no external dependencies beyond
+the Python standard library.
+"""
+
+from __future__ import annotations
+
+import os
+import sys
+from typing import List, Tuple
+
+
+PANELS_DIR = os.path.join(os.path.dirname(os.path.dirname(os.path.abspath(__file__))), "panels")
+
+
+class ValidationError(Exception):
+    """Raised when a validation error occurs."""
+    pass
+
+
+def read_panel(filepath: str) -> Tuple[List[str], List[str]]:
+    """Read a panel file and return a tuple of (gene_lines, warnings).
+
+    Comment lines and empty lines are skipped.  The returned list contains
+    only gene symbols as they appear in the file (with surrounding whitespace
+    stripped).  A list of warning messages is returned separately.
+    """
+    warnings: List[str] = []
+    genes: List[str] = []
+    with open(filepath, "r", encoding="utf-8-sig") as f:
+        raw_content = f.read()
+        # Check newline at end of file
+        if raw_content and not raw_content.endswith("\n"):
+            raise ValidationError(f"{filepath}: file must end with a newline\n")
+        # Reset pointer and iterate lines
+        f.seek(0)
+        for line_num, line in enumerate(f, start=1):
+            line = line.rstrip("\n").strip()
+            if not line or line.startswith("#"):
+                continue
+            # Disallow any whitespace inside the gene symbol
+            if any(ch.isspace() for ch in line):
+                raise ValidationError(
+                    f"{filepath}:{line_num}: invalid entry '{line}' (contains whitespace)."
+                )
+            # Check for duplicate ignoring case
+            lower = line.lower()
+            for existing in genes:
+                if existing == line:
+                    raise ValidationError(
+                        f"{filepath}:{line_num}: duplicate gene '{line}' detected."
+                    )
+                if existing.lower() == lower:
+                    warnings.append(
+                        f"{filepath}:{line_num}: warning – gene '{line}' differs only in case from '{existing}'."
+                    )
+            genes.append(line)
+    return genes, warnings
+
+
+def validate_sorted(genes: List[str], filepath: str) -> None:
+    """Ensure genes are sorted case‑insensitively.  Raise ValidationError if not."""
+    prev: str | None = None
+    for idx, gene in enumerate(genes):
+        key = gene.lower()
+        if prev is not None and key < prev:
+            raise ValidationError(
+                f"{filepath}: genes must be sorted alphabetically (case‑insensitive)."
+                f" Found out‑of‑order entry '{gene}' at position {idx + 1}."
+            )
+        prev = key
+
+
+def main() -> None:
+    errors: List[str] = []
+    all_warnings: List[str] = []
+
+    if not os.path.isdir(PANELS_DIR):
+        print(f"Panels directory not found at {PANELS_DIR}", file=sys.stderr)
+        sys.exit(1)
+
+    for filename in os.listdir(PANELS_DIR):
+        # Only validate plain text panel files
+        if not filename.endswith(".txt"):
+            continue
+        path = os.path.join(PANELS_DIR, filename)
+        try:
+            genes, warnings = read_panel(path)
+            all_warnings.extend(warnings)
+            validate_sorted(genes, path)
+        except ValidationError as e:
+            errors.append(str(e))
+
+    for w in all_warnings:
+        print(w, file=sys.stderr)
+
+    if errors:
+        for err in errors:
+            print(err, file=sys.stderr)
+        sys.exit(1)
+
+    print("All panels validated successfully.")
+
+
+if __name__ == "__main__":
+    main()
\ No newline at end of file
-- 
2.39.5


From 3bb330a81ba5acd80d79ceccbf23e87ab39b60be Mon Sep 17 00:00:00 2001
From: AI <ai@example.com>
Date: Mon, 22 Dec 2025 14:46:59 +0000
Subject: [PATCH 3/5] Add GitHub Actions workflows for panel validation and
 diff commenting

---
 .github/workflows/panel-diff-comment.yml | 56 ++++++++++++++++++++++++
 .github/workflows/validate-panels.yml    | 25 +++++++++++
 2 files changed, 81 insertions(+)
 create mode 100644 .github/workflows/panel-diff-comment.yml
 create mode 100644 .github/workflows/validate-panels.yml

diff --git a/.github/workflows/panel-diff-comment.yml b/.github/workflows/panel-diff-comment.yml
new file mode 100644
index 0000000..c72efc4
--- /dev/null
+++ b/.github/workflows/panel-diff-comment.yml
@@ -0,0 +1,56 @@
+name: Panel diff commenter
+
+on:
+  pull_request:
+    types: [opened, synchronize, reopened]
+
+permissions:
+  contents: read
+  pull-requests: write
+
+jobs:
+  panel-diff:
+    runs-on: ubuntu-latest
+    if: github.event.pull_request  # ensure PR context exists
+    steps:
+      - name: Checkout repository
+        uses: actions/checkout@v3
+        with:
+          fetch-depth: 0
+      - name: Set up Python
+        uses: actions/setup-python@v4
+        with:
+          python-version: '3.11'
+      - name: Generate panel diff summary
+        id: diff
+        run: |
+          python scripts/panel_diff.py "${{ github.event.pull_request.base.sha }}" "${{ github.event.pull_request.head.sha }}" > panel_diff.md
+      - name: Comment panel diff on PR
+        uses: actions/github-script@v7
+        with:
+          github-token: ${{ secrets.GITHUB_TOKEN }}
+          script: |
+            const fs = require('fs');
+            const diff = fs.readFileSync('panel_diff.md', 'utf8');
+            const { owner, repo, number } = context.issue;
+            const titleTag = '**Panel change summary**';
+            const body = `${titleTag}\n\n${diff}`;
+            // Fetch existing comments
+            const comments = await github.rest.issues.listComments({ owner, repo, issue_number: number });
+            const actor = context.actor;
+            let existing = comments.data.find(c => c.user.login === actor && c.body.startsWith(titleTag));
+            if (existing) {
+              await github.rest.issues.updateComment({
+                owner,
+                repo,
+                comment_id: existing.id,
+                body
+              });
+            } else {
+              await github.rest.issues.createComment({
+                owner,
+                repo,
+                issue_number: number,
+                body
+              });
+            }
\ No newline at end of file
diff --git a/.github/workflows/validate-panels.yml b/.github/workflows/validate-panels.yml
new file mode 100644
index 0000000..7b0f269
--- /dev/null
+++ b/.github/workflows/validate-panels.yml
@@ -0,0 +1,25 @@
+name: Validate gene panels
+
+on:
+  pull_request:
+  push:
+
+permissions:
+  contents: read
+
+jobs:
+  validate-panels:
+    runs-on: ubuntu-latest
+    steps:
+      - name: Checkout repository
+        uses: actions/checkout@v3
+        with:
+          fetch-depth: 0
+      - name: Set up Python
+        uses: actions/setup-python@v4
+        with:
+          python-version: '3.11'
+      - name: Install dependencies (none)
+        run: echo "No dependencies to install"
+      - name: Validate panels
+        run: python scripts/validate_panels.py
\ No newline at end of file
-- 
2.39.5


From 3b16fc6dfc163a9d9474e5dab3b821be3cd8b249 Mon Sep 17 00:00:00 2001
From: AI <ai@example.com>
Date: Mon, 22 Dec 2025 14:47:02 +0000
Subject: [PATCH 4/5] Add governance scaffolding: PR template, Code Owners,
 GitHub setup doc and changelog

---
 .github/CODEOWNERS               | 16 ++++++++++++++++
 .github/PULL_REQUEST_TEMPLATE.md | 21 +++++++++++++++++++++
 CHANGELOG.md                     | 15 +++++++++++++++
 docs/SETUP_GITHUB.md             | 16 ++++++++++++++++
 4 files changed, 68 insertions(+)
 create mode 100644 .github/CODEOWNERS
 create mode 100644 .github/PULL_REQUEST_TEMPLATE.md
 create mode 100644 CHANGELOG.md
 create mode 100644 docs/SETUP_GITHUB.md

diff --git a/.github/CODEOWNERS b/.github/CODEOWNERS
new file mode 100644
index 0000000..0cb90ca
--- /dev/null
+++ b/.github/CODEOWNERS
@@ -0,0 +1,16 @@
+# Code owners for PanelAppByIvan
+#
+# Assign owners to panel files and other parts of the repository.  When a pull request
+# modifies a file covered by a CODEOWNERS rule, GitHub will request a review from
+# the listed users or teams.  Replace the placeholders below with actual GitHub
+# usernames or team slugs.
+
+# All panel files should be reviewed by panel curators
+panels/* @ORG/panel-curators
+
+# Scripts and CI can be reviewed by maintainers
+scripts/* @ORG/panel-curators
+.github/workflows/* @ORG/panel-curators
+
+# Catch‑all: require at least one maintainer review for any other change
+* @ORG/panel-curators
\ No newline at end of file
diff --git a/.github/PULL_REQUEST_TEMPLATE.md b/.github/PULL_REQUEST_TEMPLATE.md
new file mode 100644
index 0000000..a3d2848
--- /dev/null
+++ b/.github/PULL_REQUEST_TEMPLATE.md
@@ -0,0 +1,21 @@
+## What does this change?
+
+<!-- Briefly describe what your pull request does. Focus on panels modified and rationale. -->
+
+## Which panel(s) were changed and why?
+
+- **Panels affected**: <!-- e.g. hereditary_cancer, cardiomyopathy -->
+- **Reasoning**: <!-- Provide a short clinical or assay rationale for each change. -->
+
+## Source or ticket (if applicable)
+
+<!-- Include a link to the issue, ticket or external request that motivated this change. -->
+
+## Validation
+
+- [ ] I have run `python scripts/validate_panels.py` locally and confirmed there are no errors.
+- [ ] The panels are sorted alphabetically and do not contain duplicates or formatting issues.
+
+## Additional notes
+
+<!-- Anything else reviewers should know. -->
\ No newline at end of file
diff --git a/CHANGELOG.md b/CHANGELOG.md
new file mode 100644
index 0000000..6bdb505
--- /dev/null
+++ b/CHANGELOG.md
@@ -0,0 +1,15 @@
+# Changelog
+
+All notable changes to this repository are documented in this file.  The format loosely follows
+the [Keep a Changelog](https://keepachangelog.com/) guidelines.  For a detailed view of gene
+additions and removals, refer to the **Panel change summary** comment automatically posted on pull
+requests by our CI.
+
+## [Unreleased]
+
+- Initial setup of panel repository:
+  - Added `panels/` directory with sample panels for hereditary cancer, cardiomyopathy and epilepsy.
+  - Added `panels/index.yml` catalog and `panels/README.md` with format guidelines.
+  - Added validation script (`scripts/validate_panels.py`) and panel diff generator (`scripts/panel_diff.py`).
+  - Added GitHub Actions workflows to validate panels and post change summaries.
+  - Added governance scaffolding: PR template, code owners and setup instructions.
diff --git a/docs/SETUP_GITHUB.md b/docs/SETUP_GITHUB.md
new file mode 100644
index 0000000..646ca61
--- /dev/null
+++ b/docs/SETUP_GITHUB.md
@@ -0,0 +1,16 @@
+# Recommended GitHub settings
+
+To ensure panel changes are reviewed and recorded properly, we recommend enabling the following settings on the repository's default branch (typically **main**).  These settings can be configured under *Settings → Branches* in the GitHub UI.
+
+1. **Require a pull request before merging**
+   * Enable *Require pull request reviews before merging*.
+   * Optionally require the branch to be up to date before merging to ensure that CI has run on the latest code.
+2. **Require approvals**
+   * Set *Required approvals* to at least **1**.  This ensures that another curator reviews the panel changes.
+   * Enable *Dismiss stale pull request approvals when new commits are pushed* to force re‑review after updates.
+3. **Require review from Code Owners**
+   * Enable *Require review from Code Owners*.  This will automatically request reviews from the owners specified in `.github/CODEOWNERS` for any files they cover (including `panels/*`).
+4. **Status checks**
+   * Ensure that the `Validate gene panels` workflow passes before allowing merges.  You can do this by selecting it under *Status checks that must pass before merging*.
+
+These settings help maintain a clear audit trail of who changed which genes and why.  They also prevent accidental direct pushes to the main branch without review.
\ No newline at end of file
-- 
2.39.5


From f730fabc1c72a6790a431260539d935314c0ff16 Mon Sep 17 00:00:00 2001
From: AI <ai@example.com>
Date: Mon, 22 Dec 2025 14:47:06 +0000
Subject: [PATCH 5/5] Add optional panel editor web app with FastAPI and Docker
 setup

---
 panel_editor_app/Dockerfile          |  15 ++
 panel_editor_app/README.md           |  61 +++++++
 panel_editor_app/app.py              | 230 +++++++++++++++++++++++++++
 panel_editor_app/docker-compose.yml  |  12 ++
 panel_editor_app/requirements.txt    |   4 +
 panel_editor_app/templates/base.html |  24 +++
 panel_editor_app/templates/edit.html |  21 +++
 panel_editor_app/templates/list.html |  11 ++
 8 files changed, 378 insertions(+)
 create mode 100644 panel_editor_app/Dockerfile
 create mode 100644 panel_editor_app/README.md
 create mode 100644 panel_editor_app/app.py
 create mode 100644 panel_editor_app/docker-compose.yml
 create mode 100644 panel_editor_app/requirements.txt
 create mode 100644 panel_editor_app/templates/base.html
 create mode 100644 panel_editor_app/templates/edit.html
 create mode 100644 panel_editor_app/templates/list.html

diff --git a/panel_editor_app/Dockerfile b/panel_editor_app/Dockerfile
new file mode 100644
index 0000000..0582f59
--- /dev/null
+++ b/panel_editor_app/Dockerfile
@@ -0,0 +1,15 @@
+FROM python:3.11-slim
+
+# Install dependencies
+RUN pip install --no-cache-dir --upgrade pip
+COPY panel_editor_app/requirements.txt /tmp/requirements.txt
+RUN pip install --no-cache-dir -r /tmp/requirements.txt
+
+# Copy application code
+COPY panel_editor_app /app
+WORKDIR /app
+
+# Expose port (can be overridden via APP_PORT)
+ENV APP_PORT=8000
+
+CMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "${APP_PORT}"]
\ No newline at end of file
diff --git a/panel_editor_app/README.md b/panel_editor_app/README.md
new file mode 100644
index 0000000..8543ec2
--- /dev/null
+++ b/panel_editor_app/README.md
@@ -0,0 +1,61 @@
+# Panel Editor Web Application (Optional)
+
+This directory contains an optional, lightweight web application that lets users
+edit gene panels without needing a GitHub account.  It is designed to be
+self‑hosted behind a simple password and works by creating a new branch and
+pull request on GitHub using a personal access token.
+
+## Features
+
+* List available panels defined in `panels/`.
+* View and edit a panel’s gene list in a web browser.
+* Preview which genes have been added or removed compared to the current main branch.
+* Submit changes: creates a new branch, commits the updated panel file, and
+  opens a pull request against the base branch.
+
+## Running locally
+
+The app is built with FastAPI and Jinja2 templates.  You can run it directly
+with Uvicorn or via Docker.  A minimal set of dependencies is listed in
+`requirements.txt`.
+
+### Environment variables
+
+| Variable | Description |
+|---------|-------------|
+| `GITHUB_OWNER` | GitHub username or organisation that owns the repository. |
+| `GITHUB_REPO` | Name of the repository (e.g. `PanelAppByIvan`). |
+| `GITHUB_TOKEN` | Personal access token with repo permissions. |
+| `BASE_BRANCH` | Target branch for pull requests (default: `main`). |
+| `APP_PASSWORD` | Password required to access the web UI. |
+| `APP_PORT` | Port on which the server should listen (default: `8000`). |
+
+### Running with Docker
+
+To build and run the app using Docker:
+
+```bash
+docker build -t panel-editor ./panel_editor_app
+docker run -e GITHUB_OWNER=... -e GITHUB_REPO=... -e GITHUB_TOKEN=... -e APP_PASSWORD=changeme -p 8000:8000 panel-editor
+```
+
+Alternatively, `docker-compose.yml` is provided for convenience:
+
+```bash
+APP_PASSWORD=changeme GITHUB_OWNER=... GITHUB_REPO=... GITHUB_TOKEN=... docker-compose up
+```
+
+### Development
+
+Run the app directly with Python:
+
+```bash
+export APP_PASSWORD=changeme
+uvicorn panel_editor_app.app:app --reload
+```
+
+At this stage the editor relies on a valid GitHub token to create branches
+and pull requests.  The network calls are wrapped in a simple `GitHubClient`
+class in `app.py`.  If network connectivity is unavailable the submission
+feature will raise an exception.  Validation is performed using the same
+logic as `scripts/validate_panels.py`.
\ No newline at end of file
diff --git a/panel_editor_app/app.py b/panel_editor_app/app.py
new file mode 100644
index 0000000..3fc3d96
--- /dev/null
+++ b/panel_editor_app/app.py
@@ -0,0 +1,230 @@
+"""
+Simple web application for editing gene panels without a GitHub account.
+
+This FastAPI app provides a minimal interface to list panels stored in the
+repository, edit them via a textarea, preview changes versus the current
+main branch and submit a change by creating a branch and pull request
+through the GitHub API.  A shared password (provided via the APP_PASSWORD
+environment variable) protects the interface from unauthorised use.
+"""
+
+from __future__ import annotations
+
+import base64
+import datetime as dt
+import os
+import pathlib
+from typing import Dict, List, Optional, Tuple
+
+import requests
+from fastapi import Depends, FastAPI, Form, HTTPException, Request, status
+from fastapi.responses import RedirectResponse
+from fastapi.security import HTTPBasic, HTTPBasicCredentials
+from fastapi.templating import Jinja2Templates
+
+
+# Configure directories
+ROOT_DIR = pathlib.Path(__file__).resolve().parents[1]
+PANELS_DIR = ROOT_DIR / "panels"
+
+# Authentication
+security = HTTPBasic()
+
+
+def verify_credentials(credentials: HTTPBasicCredentials = Depends(security)):
+    """Verify that provided basic auth password matches APP_PASSWORD."""
+    app_password = os.getenv("APP_PASSWORD")
+    if not app_password:
+        raise HTTPException(status_code=500, detail="APP_PASSWORD not configured")
+    correct = credentials.password == app_password
+    if not correct:
+        raise HTTPException(
+            status_code=status.HTTP_401_UNAUTHORIZED,
+            detail="Incorrect password",
+            headers={"WWW-Authenticate": "Basic"},
+        )
+    return credentials.username
+
+
+class GitHubClient:
+    """Minimal wrapper around GitHub REST API for creating branches and PRs."""
+    def __init__(self, owner: str, repo: str, token: str):
+        self.owner = owner
+        self.repo = repo
+        self.token = token
+        self.base_url = f"https://api.github.com/repos/{owner}/{repo}"
+        self.headers = {
+            "Authorization": f"token {token}",
+            "Accept": "application/vnd.github+json",
+            "User-Agent": "panel-editor-app",
+        }
+
+    def _request(self, method: str, url: str, **kwargs):
+        resp = requests.request(method, url, headers=self.headers, **kwargs)
+        if resp.status_code >= 400:
+            raise HTTPException(status_code=resp.status_code, detail=resp.json().get('message', resp.text))
+        return resp.json()
+
+    def get_branch_sha(self, branch: str) -> str:
+        url = f"{self.base_url}/git/ref/heads/{branch}"
+        data = self._request("GET", url)
+        return data["object"]["sha"]
+
+    def create_branch(self, new_branch: str, base_sha: str) -> None:
+        url = f"{self.base_url}/git/refs"
+        payload = {"ref": f"refs/heads/{new_branch}", "sha": base_sha}
+        self._request("POST", url, json=payload)
+
+    def create_or_update_file(self, path: str, content: str, message: str, branch: str) -> None:
+        url = f"{self.base_url}/contents/{path}"
+        b64_content = base64.b64encode(content.encode("utf-8")).decode()
+        payload = {
+            "message": message,
+            "content": b64_content,
+            "branch": branch,
+        }
+        self._request("PUT", url, json=payload)
+
+    def create_pull_request(self, title: str, body: str, head: str, base: str) -> str:
+        url = f"{self.base_url}/pulls"
+        payload = {"title": title, "body": body, "head": head, "base": base}
+        data = self._request("POST", url, json=payload)
+        return data.get("html_url")
+
+
+def list_panels() -> List[pathlib.Path]:
+    return sorted([p for p in PANELS_DIR.iterdir() if p.suffix == ".txt"])
+
+
+def read_panel_file(path: pathlib.Path) -> str:
+    return path.read_text(encoding="utf-8")
+
+
+def parse_genes(content: str) -> List[str]:
+    genes: List[str] = []
+    for line in content.splitlines():
+        line = line.strip()
+        if not line or line.startswith("#"):
+            continue
+        genes.append(line)
+    return genes
+
+
+def diff_genes(original: str, updated: str) -> Tuple[List[str], List[str]]:
+    """Return (added, removed) lists of genes between two contents."""
+    orig_set = set(parse_genes(original))
+    new_set = set(parse_genes(updated))
+    added = sorted(list(new_set - orig_set))
+    removed = sorted(list(orig_set - new_set))
+    return added, removed
+
+
+def validate_content(content: str) -> Optional[str]:
+    """Validate panel content.  Return error message if invalid, else None."""
+    lines = content.splitlines()
+    # Must end with newline
+    if content and not content.endswith("\n"):
+        return "File must end with a newline"
+    seen: List[str] = []
+    for i, line in enumerate(lines, start=1):
+        stripped = line.strip()
+        if not stripped or stripped.startswith("#"):
+            continue
+        if any(ch.isspace() for ch in stripped):
+            return f"Line {i}: '{stripped}' contains whitespace"
+        # duplicate check
+        if stripped in seen:
+            return f"Duplicate gene '{stripped}' on line {i}"
+        # case-insensitive duplicate
+        lower = stripped.lower()
+        for s in seen:
+            if s.lower() == lower:
+                # not fatal but return warning message in error string
+                return f"Gene '{stripped}' duplicates '{s}' ignoring case at line {i}"
+        seen.append(stripped)
+    # check sorted
+    keys = [g.lower() for g in seen]
+    if keys != sorted(keys):
+        return "Genes must be sorted alphabetically (case-insensitive)"
+    return None
+
+
+templates = Jinja2Templates(directory=str(pathlib.Path(__file__).resolve().parent / "templates"))
+app = FastAPI()
+
+
+@app.get("/")
+def index(request: Request, username: str = Depends(verify_credentials)):
+    panels = list_panels()
+    return templates.TemplateResponse("list.html", {"request": request, "panels": panels, "username": username})
+
+
+@app.get("/edit/{panel_name}")
+def edit_panel(panel_name: str, request: Request, username: str = Depends(verify_credentials)):
+    panel_path = PANELS_DIR / panel_name
+    if not panel_path.exists() or panel_path.suffix != ".txt":
+        raise HTTPException(status_code=404, detail="Panel not found")
+    content = read_panel_file(panel_path)
+    return templates.TemplateResponse("edit.html", {
+        "request": request,
+        "panel_name": panel_name,
+        "content": content,
+        "error": None,
+        "added": [],
+        "removed": [],
+    })
+
+
+@app.post("/edit/{panel_name}")
+def save_panel(panel_name: str, request: Request, content: str = Form(...), username: str = Depends(verify_credentials)):
+    panel_path = PANELS_DIR / panel_name
+    if not panel_path.exists() or panel_path.suffix != ".txt":
+        raise HTTPException(status_code=404, detail="Panel not found")
+    # Ensure newline at EOF for diff and validation
+    if not content.endswith("\n"):
+        content += "\n"
+    # Validate
+    error_msg = validate_content(content)
+    original = read_panel_file(panel_path)
+    added, removed = diff_genes(original, content)
+    if error_msg:
+        # Show the form again with error and diff preview
+        return templates.TemplateResponse("edit.html", {
+            "request": request,
+            "panel_name": panel_name,
+            "content": content,
+            "error": error_msg,
+            "added": added,
+            "removed": removed,
+        })
+    # Submit change via GitHub
+    owner = os.getenv("GITHUB_OWNER")
+    repo = os.getenv("GITHUB_REPO")
+    token = os.getenv("GITHUB_TOKEN")
+    base_branch = os.getenv("BASE_BRANCH", "main")
+    if not (owner and repo and token):
+        raise HTTPException(status_code=500, detail="GitHub client configuration missing")
+    gh = GitHubClient(owner, repo, token)
+    try:
+        base_sha = gh.get_branch_sha(base_branch)
+        timestamp = dt.datetime.utcnow().strftime("%Y%m%d%H%M%S")
+        branch_name = f"panel-edit-{panel_name.replace('.txt','')}-{timestamp}"
+        gh.create_branch(branch_name, base_sha)
+        commit_message = f"Update panel {panel_name} via web editor"
+        file_path = f"panels/{panel_name}"
+        gh.create_or_update_file(file_path, content, commit_message, branch_name)
+        pr_title = f"Edit panel {panel_name}"
+        pr_body = f"Automated update of panel `{panel_name}` via web editor.\n\nAdded genes: {', '.join(added) or 'none'}\nRemoved genes: {', '.join(removed) or 'none'}"
+        pr_url = gh.create_pull_request(pr_title, pr_body, branch_name, base_branch)
+    except HTTPException as exc:
+        # propagate HTTP errors as warnings to the user
+        return templates.TemplateResponse("edit.html", {
+            "request": request,
+            "panel_name": panel_name,
+            "content": content,
+            "error": f"Submission failed: {exc.detail}",
+            "added": added,
+            "removed": removed,
+        })
+    # Redirect to PR URL
+    return RedirectResponse(url=pr_url, status_code=303)
\ No newline at end of file
diff --git a/panel_editor_app/docker-compose.yml b/panel_editor_app/docker-compose.yml
new file mode 100644
index 0000000..986ce34
--- /dev/null
+++ b/panel_editor_app/docker-compose.yml
@@ -0,0 +1,12 @@
+version: '3.8'
+services:
+  panel-editor:
+    build: .
+    ports:
+      - "${APP_PORT:-8000}:8000"
+    environment:
+      APP_PASSWORD: ${APP_PASSWORD}
+      GITHUB_OWNER: ${GITHUB_OWNER}
+      GITHUB_REPO: ${GITHUB_REPO}
+      GITHUB_TOKEN: ${GITHUB_TOKEN}
+      BASE_BRANCH: ${BASE_BRANCH:-main}
\ No newline at end of file
diff --git a/panel_editor_app/requirements.txt b/panel_editor_app/requirements.txt
new file mode 100644
index 0000000..9bc7f6c
--- /dev/null
+++ b/panel_editor_app/requirements.txt
@@ -0,0 +1,4 @@
+fastapi==0.111.0
+uvicorn==0.29.0
+jinja2==3.1.3
+requests==2.31.0
\ No newline at end of file
diff --git a/panel_editor_app/templates/base.html b/panel_editor_app/templates/base.html
new file mode 100644
index 0000000..5dbf211
--- /dev/null
+++ b/panel_editor_app/templates/base.html
@@ -0,0 +1,24 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <title>Panel Editor</title>
+    <style>
+      body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
+      header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
+      nav a { margin-right: 1rem; }
+      .error { color: #d93025; margin: 1rem 0; }
+      .diff { margin: 1rem 0; padding: 0.5rem; border: 1px solid #ccc; background: #f9f9f9; }
+      textarea { width: 100%; height: 400px; font-family: monospace; }
+    </style>
+</head>
+<body>
+    <header>
+        <h1>Panel Editor</h1>
+        <nav>
+            <a href="/">Home</a>
+        </nav>
+    </header>
+    {% block content %}{% endblock %}
+</body>
+</html>
\ No newline at end of file
diff --git a/panel_editor_app/templates/edit.html b/panel_editor_app/templates/edit.html
new file mode 100644
index 0000000..5d76267
--- /dev/null
+++ b/panel_editor_app/templates/edit.html
@@ -0,0 +1,21 @@
+{% extends "base.html" %}
+{% block content %}
+<h2>Edit panel: {{ panel_name }}</h2>
+
+{% if error %}
+  <div class="error">{{ error }}</div>
+{% endif %}
+
+{% if added or removed %}
+  <div class="diff">
+    <strong>Changes preview:</strong><br>
+    Added genes: {{ added|join(", ") if added else 'none' }}<br>
+    Removed genes: {{ removed|join(", ") if removed else 'none' }}
+  </div>
+{% endif %}
+
+<form method="post">
+  <textarea name="content">{{ content }}</textarea><br>
+  <button type="submit">Submit</button>
+</form>
+{% endblock %}
\ No newline at end of file
diff --git a/panel_editor_app/templates/list.html b/panel_editor_app/templates/list.html
new file mode 100644
index 0000000..cdc543f
--- /dev/null
+++ b/panel_editor_app/templates/list.html
@@ -0,0 +1,11 @@
+{% extends "base.html" %}
+{% block content %}
+<h2>Available panels</h2>
+<ul>
+  {% for panel in panels %}
+    <li><a href="/edit/{{ panel.name }}">{{ panel.name }}</a></li>
+  {% else %}
+    <li>No panels found.</li>
+  {% endfor %}
+</ul>
+{% endblock %}
\ No newline at end of file
-- 
2.39.5

